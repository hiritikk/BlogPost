{% extends "base.html" %} {% block title %}{{ blog.title }} - Re-Defined Blog{%
endblock %} {% block description %}{{ blog.meta_description or blog.summary }}{%
endblock %} {% block extra_head %}
<!-- Open Graph meta tags for social sharing -->
<meta property="og:title" content="{{ blog.title }}" />
<meta
	property="og:description"
	content="{{ blog.meta_description or blog.summary }}"
/>
<meta property="og:type" content="article" />
<meta property="og:url" content="{{ request.url }}" />
{% if blog.banner_image_url %}
<meta property="og:image" content="{{ blog.banner_image_url }}" />
{% endif %}

<!-- Twitter Card meta tags -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="{{ blog.title }}" />
<meta
	name="twitter:description"
	content="{{ blog.meta_description or blog.summary }}"
/>
{% if blog.banner_image_url %}
<meta name="twitter:image" content="{{ blog.banner_image_url }}" />
{% endif %}

<!-- Article meta tags -->
<meta
	property="article:published_time"
	content="{{ blog.published_date.isoformat() if blog.published_date else blog.created_at.isoformat() }}"
/>
{% if blog.keywords %} {% for keyword in blog.keywords %}
<meta property="article:tag" content="{{ keyword }}" />
{% endfor %} {% endif %}

<!-- Schema.org structured data -->
<script type="application/ld+json">
	{
	  "@context": "https://schema.org",
	  "@type": "BlogPosting",
	  "headline": "{{ blog.title }}",
	  "description": "{{ blog.meta_description or blog.summary }}",
	  "datePublished": "{{ blog.published_date.isoformat() if blog.published_date else blog.created_at.isoformat() }}",
	  "dateModified": "{{ blog.updated_at.isoformat() if blog.updated_at else blog.created_at.isoformat() }}",
	  "author": {
	    "@type": "Organization",
	    "name": "Re-Defined AI"
	  },
	  "publisher": {
	    "@type": "Organization",
	    "name": "Re-Defined",
	    "logo": {
	      "@type": "ImageObject",
	      "url": "{{ request.base_url }}static/logo.png"
	    }
	  },
	  {% if blog.banner_image_url %}
	  "image": "{{ blog.banner_image_url }}",
	  {% endif %}
	  "wordCount": {{ blog.word_count or 0 }},
	  "timeRequired": "PT{{ blog.reading_time or 5 }}M"
	}
</script>
{% endblock %} {% block content %}
<!-- Hero Section -->
<article class="bg-white">
	<!-- Banner Image -->
	{% if blog.banner_image_url %}
	<div class="w-full h-96 bg-gray-200 overflow-hidden">
		<img
			src="{{ blog.banner_image_url }}"
			alt="{{ blog.title }}"
			class="w-full h-full object-cover"
		/>
	</div>
	{% else %}
	<div
		class="w-full h-96 bg-gradient-to-br from-brand-primary to-brand-secondary flex items-center justify-center"
	>
		<div class="text-center text-white">
			<i class="fas fa-blog text-6xl mb-4 opacity-50"></i>
			<h1 class="text-4xl font-bold">{{ blog.title }}</h1>
		</div>
	</div>
	{% endif %}

	<!-- Article Header -->
	<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 -mt-16 relative z-10">
		<div class="bg-white rounded-2xl shadow-xl p-8 mb-8">
			<!-- Status Badge -->
			<div class="flex items-center justify-between mb-6">
				<div class="flex items-center space-x-3">
					{% if blog.status == 'published' %}
					<span
						class="px-3 py-1 bg-green-100 text-green-800 text-sm font-medium rounded-full"
					>
						<i class="fas fa-check-circle mr-1"></i>Published
					</span>
					{% elif blog.status == 'scheduled' %}
					<span
						class="px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full"
					>
						<i class="fas fa-clock mr-1"></i>Scheduled
					</span>
					{% else %}
					<span
						class="px-3 py-1 bg-gray-100 text-gray-800 text-sm font-medium rounded-full"
					>
						<i class="fas fa-edit mr-1"></i>Draft
					</span>
					{% endif %}
				</div>

				<div class="flex items-center space-x-4">
					<button
						onclick="shareArticle()"
						class="text-gray-500 hover:text-brand-primary transition-colors"
					>
						<i class="fas fa-share-alt"></i>
					</button>
					<button
						onclick="window.print()"
						class="text-gray-500 hover:text-brand-primary transition-colors"
					>
						<i class="fas fa-print"></i>
					</button>
				</div>
			</div>

			<!-- Title -->
			<h1
				class="text-3xl lg:text-4xl font-bold text-gray-900 mb-6 leading-tight"
			>
				{{ blog.title }}
			</h1>

			<!-- Meta Information -->
			<div
				class="flex flex-wrap items-center text-sm text-gray-500 mb-6 space-x-6"
			>
				<div class="flex items-center space-x-2">
					<i class="fas fa-calendar"></i>
					<span>
						{% if blog.published_date %} Published {{
						blog.published_date.strftime('%B %d, %Y') }} {% else %} Created {{
						blog.created_at.strftime('%B %d, %Y') }} {% endif %}
					</span>
				</div>

				{% if blog.reading_time %}
				<div class="flex items-center space-x-2">
					<i class="fas fa-clock"></i>
					<span>{{ blog.reading_time }} min read</span>
				</div>
				{% endif %} {% if blog.word_count %}
				<div class="flex items-center space-x-2">
					<i class="fas fa-file-alt"></i>
					<span>{{ blog.word_count }} words</span>
				</div>
				{% endif %}

				<div class="flex items-center space-x-2">
					<i class="fas fa-robot"></i>
					<span>AI Generated</span>
				</div>
			</div>

			<!-- Summary -->
			{% if blog.summary %}
			<div class="bg-blue-50 border-l-4 border-brand-primary p-6 mb-6">
				<h2 class="text-lg font-semibold text-gray-900 mb-2">
					<i class="fas fa-lightbulb text-brand-primary mr-2"></i>Summary
				</h2>
				<p class="text-gray-700 leading-relaxed">{{ blog.summary }}</p>
			</div>
			{% endif %}

			<!-- Keywords -->
			{% if blog.keywords %}
			<div class="flex flex-wrap gap-2 mb-6">
				{% for keyword in blog.keywords %}
				<span
					class="px-3 py-1 bg-brand-primary/10 text-brand-primary text-sm rounded-full"
				>
					{{ keyword }}
				</span>
				{% endfor %}
			</div>
			{% endif %}
		</div>
	</div>

	<!-- Article Content -->
	<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pb-16">
		<div class="prose prose-lg prose-blue max-w-none">
			<!-- Format the content with proper styling -->
			<div class="blog-content">{{ blog.content | safe }}</div>
		</div>

		<!-- Sources Section -->
		{% if sources %}
		<div class="mt-12 p-6 bg-gray-50 rounded-xl">
			<h3 class="text-xl font-bold text-gray-900 mb-4">
				<i class="fas fa-quote-right text-brand-primary mr-2"></i>Sources &
				References
			</h3>
			<div class="space-y-3">
				{% for source in sources %}
				<div class="bg-white p-4 rounded-lg border">
					<div class="flex items-start justify-between">
						<div class="flex-1">
							<h4 class="font-semibold text-gray-900">{{ source.title }}</h4>
							{% if source.author %}
							<p class="text-sm text-gray-600">by {{ source.author }}</p>
							{% endif %} {% if source.url %}
							<a
								href="{{ source.url }}"
								target="_blank"
								class="text-brand-primary hover:text-brand-secondary text-sm"
							>
								{{ source.url | truncate(50) }}
								<i class="fas fa-external-link-alt ml-1"></i>
							</a>
							{% endif %}
						</div>
						<span class="px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded">
							{{ source.source_type.title() }}
						</span>
					</div>
				</div>
				{% endfor %}
			</div>
		</div>
		{% endif %}

		<!-- Generation Info -->
		{% if generation_data %}
		<div class="mt-8 p-6 bg-blue-50 rounded-xl">
			<h3 class="text-lg font-semibold text-gray-900 mb-4">
				<i class="fas fa-cogs text-brand-primary mr-2"></i>Generation Details
			</h3>
			<div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
				{% if generation_data.model_used %}
				<div>
					<span class="font-medium text-gray-700">Model:</span>
					<span class="text-gray-600">{{ generation_data.model_used }}</span>
				</div>
				{% endif %} {% if generation_data.generation_time %}
				<div>
					<span class="font-medium text-gray-700">Generation Time:</span>
					<span class="text-gray-600"
						>{{ generation_data.generation_time }}s</span
					>
				</div>
				{% endif %} {% if generation_data.tokens_used %}
				<div>
					<span class="font-medium text-gray-700">Tokens Used:</span>
					<span class="text-gray-600">{{ generation_data.tokens_used }}</span>
				</div>
				{% endif %}
			</div>
		</div>
		{% endif %}

		<!-- Navigation -->
		<div class="mt-12 flex justify-between items-center">
			<a
				href="/blogs"
				class="flex items-center text-brand-primary hover:text-brand-secondary transition-colors"
			>
				<i class="fas fa-arrow-left mr-2"></i>Back to All Blogs
			</a>

			<div class="flex items-center space-x-4">
				<a
					href="http://localhost:8501"
					target="_blank"
					class="bg-brand-primary text-white px-4 py-2 rounded-lg hover:bg-brand-secondary transition-colors text-sm"
				>
					<i class="fas fa-cogs mr-2"></i>Dashboard
				</a>
			</div>
		</div>
	</div>
</article>

<!-- Related Content Suggestions -->
<section class="py-16 bg-gray-50">
	<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
		<div class="text-center mb-12">
			<h2 class="text-3xl font-bold text-gray-900 mb-4">
				Generate More Content
			</h2>
			<p class="text-xl text-gray-600">
				Use our AI system to create more engaging blog posts
			</p>
		</div>

		<div class="bg-white rounded-2xl p-8 text-center">
			<div
				class="w-16 h-16 bg-brand-primary rounded-full flex items-center justify-center mx-auto mb-4"
			>
				<i class="fas fa-magic text-white text-2xl"></i>
			</div>
			<h3 class="text-xl font-semibold text-gray-900 mb-2">
				Ready for More AI Content?
			</h3>
			<p class="text-gray-600 mb-6">
				Create more blog posts, schedule publications, and explore trending
				topics.
			</p>
			<a
				href="http://localhost:8501"
				target="_blank"
				class="bg-brand-primary text-white px-8 py-3 rounded-lg hover:bg-brand-secondary transition-colors font-semibold"
			>
				<i class="fas fa-plus mr-2"></i>Create New Blog Post
			</a>
		</div>
	</div>
</section>

<style>
	/* Blog content styling */
	.blog-content {
		line-height: 1.8;
	}

	.blog-content h1,
	.blog-content h2,
	.blog-content h3,
	.blog-content h4,
	.blog-content h5,
	.blog-content h6 {
		color: #1f2937;
		font-weight: 700;
		margin-top: 2rem;
		margin-bottom: 1rem;
	}

	.blog-content h1 {
		font-size: 2rem;
	}
	.blog-content h2 {
		font-size: 1.75rem;
	}
	.blog-content h3 {
		font-size: 1.5rem;
	}
	.blog-content h4 {
		font-size: 1.25rem;
	}

	.blog-content p {
		margin-bottom: 1.5rem;
		color: #374151;
	}

	.blog-content ul,
	.blog-content ol {
		margin-bottom: 1.5rem;
		padding-left: 2rem;
	}

	.blog-content li {
		margin-bottom: 0.5rem;
		color: #374151;
	}

	.blog-content blockquote {
		border-left: 4px solid #2563eb;
		padding-left: 1.5rem;
		margin: 2rem 0;
		font-style: italic;
		color: #6b7280;
	}

	.blog-content a {
		color: #2563eb;
		text-decoration: underline;
	}

	.blog-content a:hover {
		color: #1e40af;
	}

	.blog-content code {
		background-color: #f3f4f6;
		padding: 0.25rem 0.5rem;
		border-radius: 0.375rem;
		font-family: 'Courier New', monospace;
		font-size: 0.875rem;
	}

	.blog-content pre {
		background-color: #1f2937;
		color: #f9fafb;
		padding: 1.5rem;
		border-radius: 0.5rem;
		overflow-x: auto;
		margin: 1.5rem 0;
	}

	.blog-content pre code {
		background-color: transparent;
		padding: 0;
		color: inherit;
	}

	/* Print styles */
	@media print {
		.no-print {
			display: none !important;
		}
	}
</style>

<script>
	function shareArticle() {
		if (navigator.share) {
			navigator.share({
				title: '{{ blog.title }}',
				text: '{{ blog.meta_description or blog.summary }}',
				url: window.location.href,
			});
		} else {
			// Fallback: copy URL to clipboard
			navigator.clipboard.writeText(window.location.href).then(() => {
				alert('Article URL copied to clipboard!');
			});
		}
	}

	// Smooth scrolling for anchor links
	document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
		anchor.addEventListener('click', function (e) {
			e.preventDefault();
			const target = document.querySelector(this.getAttribute('href'));
			if (target) {
				target.scrollIntoView({
					behavior: 'smooth',
					block: 'start',
				});
			}
		});
	});
</script>
{% endblock %}
